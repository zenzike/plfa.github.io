<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DenotCompositional: The denotational semantics is compositional | Programming Language Foundations in Agda
</title><!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="DenotCompositional: The denotational semantics is compositional" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Programming Language Foundations in Agda" />
<meta property="og:description" content="Programming Language Foundations in Agda" />
<link rel="canonical" href="https://plfa.github.io/DenotCompositional/" />
<meta property="og:url" content="https://plfa.github.io/DenotCompositional/" />
<meta property="og:site_name" content="Programming Language Foundations in Agda" />
<script type="application/ld+json">
{"description":"Programming Language Foundations in Agda","@type":"WebPage","url":"https://plfa.github.io/DenotCompositional/","headline":"DenotCompositional: The denotational semantics is compositional","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"></head>
<body><header class="site-header" role="banner">

    <div class="wrapper">

        <a class="site-title" href="/">Programming Language Foundations in Agda
</a>

        <nav class="site-nav">
            <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span>

            <div class="trigger">
                <a class="page-link" href="/">Table of Contents</a>
                <a class="page-link" href="/GettingStarted/">Getting Started</a>
            </div>
        </nav>

    </div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
      <h1 class="post-title">DenotCompositional: The denotational semantics is compositional</h1>
  </header>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/Denot/">Prev</a>
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/DenotCompositional.lagda">Source</a>
    
    
    &bullet;
    <a alt="Next chapter" href="/DenotSound/">Next</a>
    
</p>


  <div class="post-content">
    <pre class="Agda"><a id="196" class="Keyword">module</a> <a id="203" href="/DenotCompositional/" class="Module">plfa.DenotCompositional</a> <a id="227" class="Keyword">where</a></pre>

<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="270" class="Keyword">open</a> <a id="275" class="Keyword">import</a> <a id="282" href="/Untyped/" class="Module">plfa.Untyped</a>
<a id="295" class="Keyword">open</a> <a id="300" class="Keyword">import</a> <a id="307" href="/Denot/" class="Module">plfa.Denot</a>

<a id="319" class="Keyword">open</a> <a id="324" class="Keyword">import</a> <a id="331" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="371" class="Keyword">using</a> <a id="377" class="Symbol">(</a><a id="378" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">_≡_</a><a id="381" class="Symbol">;</a> <a id="383" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#660" class="Function Operator">_≢_</a><a id="386" class="Symbol">;</a> <a id="388" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="392" class="Symbol">;</a> <a id="394" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#838" class="Function">sym</a><a id="397" class="Symbol">;</a> <a id="399" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a><a id="403" class="Symbol">;</a> <a id="405" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1408" class="Function">cong₂</a><a id="410" class="Symbol">;</a> <a id="412" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1274" class="Function">cong-app</a><a id="420" class="Symbol">)</a>
<a id="422" class="Keyword">open</a> <a id="427" class="Keyword">import</a> <a id="434" href="https://agda.github.io/agda-stdlib/Data.Product.html" class="Module">Data.Product</a> <a id="447" class="Keyword">using</a> <a id="453" class="Symbol">(</a><a id="454" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">_×_</a><a id="457" class="Symbol">;</a> <a id="459" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#69" class="Record">Σ</a><a id="460" class="Symbol">;</a> <a id="462" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ-syntax</a><a id="470" class="Symbol">;</a> <a id="472" href="https://agda.github.io/agda-stdlib/Data.Product.html#881" class="Function">∃</a><a id="473" class="Symbol">;</a> <a id="475" href="https://agda.github.io/agda-stdlib/Data.Product.html#942" class="Function">∃-syntax</a><a id="483" class="Symbol">;</a> <a id="485" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#155" class="Field">proj₁</a><a id="490" class="Symbol">;</a> <a id="492" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#167" class="Field">proj₂</a><a id="497" class="Symbol">)</a>
  <a id="501" class="Keyword">renaming</a> <a id="510" class="Symbol">(</a><a id="511" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">_,_</a> <a id="515" class="Symbol">to</a> <a id="518" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="523" class="Symbol">)</a>
<a id="525" class="Keyword">open</a> <a id="530" class="Keyword">import</a> <a id="537" href="https://agda.github.io/agda-stdlib/Data.Sum.html" class="Module">Data.Sum</a>
<a id="546" class="Keyword">open</a> <a id="551" class="Keyword">import</a> <a id="558" href="https://agda.github.io/agda-stdlib/Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="573" class="Keyword">using</a> <a id="579" class="Symbol">(</a><a id="580" href="https://agda.github.io/agda-stdlib/Agda.Primitive.html#611" class="Primitive">lzero</a><a id="585" class="Symbol">)</a>
<a id="587" class="Keyword">open</a> <a id="592" class="Keyword">import</a> <a id="599" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="616" class="Keyword">using</a> <a id="622" class="Symbol">(</a><a id="623" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬_</a><a id="625" class="Symbol">)</a>
<a id="627" class="Keyword">open</a> <a id="632" class="Keyword">import</a> <a id="639" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="665" class="Keyword">using</a> <a id="671" class="Symbol">(</a><a id="672" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html#560" class="Function">contradiction</a><a id="685" class="Symbol">)</a>
<a id="687" class="Keyword">open</a> <a id="692" class="Keyword">import</a> <a id="699" href="https://agda.github.io/agda-stdlib/Data.Empty.html" class="Module">Data.Empty</a> <a id="710" class="Keyword">using</a> <a id="716" class="Symbol">(</a><a id="717" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a><a id="723" class="Symbol">)</a>
<a id="725" class="Keyword">open</a> <a id="730" class="Keyword">import</a> <a id="737" href="https://agda.github.io/agda-stdlib/Data.Unit.html" class="Module">Data.Unit</a>
<a id="747" class="Keyword">open</a> <a id="752" class="Keyword">import</a> <a id="759" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="776" class="Keyword">using</a> <a id="782" class="Symbol">(</a><a id="783" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#534" class="Datatype">Dec</a><a id="786" class="Symbol">;</a> <a id="788" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a><a id="791" class="Symbol">;</a> <a id="793" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a><a id="795" class="Symbol">)</a>
<a id="797" class="Keyword">open</a> <a id="802" class="Keyword">import</a> <a id="809" href="https://agda.github.io/agda-stdlib/Function.html" class="Module">Function</a> <a id="818" class="Keyword">using</a> <a id="824" class="Symbol">(</a><a id="825" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">_∘_</a><a id="828" class="Symbol">)</a>
<a id="830" class="Comment">-- open import plfa.Isomorphism using (extensionality)  -- causes a bug!</a></pre>

<h2 id="compositionality">Compositionality</h2>

<p>To prove that the semantics is compositional, we need to fill in the
ellipses in the following equations.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ℰ (ƛ M) ≃ ... ℰ M ...
ℰ (M · N) ≃ ... ℰ M ... ℰ N ...
</code></pre></div></div>

<p>Regarding the first equation, we need a function that maps a
Denotation (Γ , ★) to a Denotation Γ. This function, let us name it ℱ,
should mimic the non-recursive part of the semantics when applied to a
lambda term.  In particular, we need to consider the rules (↦-intro),
(⊥-intro), and (⊔-intro). So ℱ has three parameters, the denotation D
of the subterm M, an environment γ, and a value v.  If we define ℱ by
recursion on the value v, then it will match up nicely with the three
rules (↦-intro), (⊥-intro), and (⊔-intro).</p>

<pre class="Agda"><a id="ℱ"></a><a id="1646" href="/DenotCompositional/#1646" class="Function">ℱ</a> <a id="1648" class="Symbol">:</a> <a id="1650" class="Symbol">∀{</a><a id="1652" href="/DenotCompositional/#1652" class="Bound">Γ</a><a id="1653" class="Symbol">}</a> <a id="1655" class="Symbol">→</a> <a id="1657" href="/Denot/#18241" class="Function">Denotation</a> <a id="1668" class="Symbol">(</a><a id="1669" href="/DenotCompositional/#1652" class="Bound">Γ</a> <a id="1671" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="1673" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="1674" class="Symbol">)</a> <a id="1676" class="Symbol">→</a> <a id="1678" href="/Denot/#18241" class="Function">Denotation</a> <a id="1689" href="/DenotCompositional/#1652" class="Bound">Γ</a>
<a id="1691" href="/DenotCompositional/#1646" class="Function">ℱ</a> <a id="1693" href="/DenotCompositional/#1693" class="Bound">D</a> <a id="1695" href="/DenotCompositional/#1695" class="Bound">γ</a> <a id="1697" class="Symbol">(</a><a id="1698" href="/DenotCompositional/#1698" class="Bound">v₁</a> <a id="1701" href="/Denot/#4133" class="InductiveConstructor Operator">↦</a> <a id="1703" href="/DenotCompositional/#1703" class="Bound">v₂</a><a id="1705" class="Symbol">)</a> <a id="1707" class="Symbol">=</a> <a id="1709" href="/DenotCompositional/#1693" class="Bound">D</a> <a id="1711" class="Symbol">(</a><a id="1712" href="/DenotCompositional/#1695" class="Bound">γ</a> <a id="1714" href="/Denot/#7646" class="Function Operator">`,</a> <a id="1717" href="/DenotCompositional/#1698" class="Bound">v₁</a><a id="1719" class="Symbol">)</a> <a id="1721" href="/DenotCompositional/#1703" class="Bound">v₂</a>
<a id="1724" href="/DenotCompositional/#1646" class="Function">ℱ</a> <a id="1726" href="/DenotCompositional/#1726" class="Bound">D</a> <a id="1728" href="/DenotCompositional/#1728" class="Bound">γ</a> <a id="1730" href="/Denot/#4121" class="InductiveConstructor">⊥</a> <a id="1732" class="Symbol">=</a> <a id="1734" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Unit.html#69" class="Record">⊤</a>
<a id="1736" href="/DenotCompositional/#1646" class="Function">ℱ</a> <a id="1738" href="/DenotCompositional/#1738" class="Bound">D</a> <a id="1740" href="/DenotCompositional/#1740" class="Bound">γ</a> <a id="1742" class="Symbol">(</a><a id="1743" href="/DenotCompositional/#1743" class="Bound">v₁</a> <a id="1746" href="/Denot/#4163" class="InductiveConstructor Operator">⊔</a> <a id="1748" href="/DenotCompositional/#1748" class="Bound">v₂</a><a id="1750" class="Symbol">)</a> <a id="1752" class="Symbol">=</a> <a id="1754" class="Symbol">(</a><a id="1755" href="/DenotCompositional/#1646" class="Function">ℱ</a> <a id="1757" href="/DenotCompositional/#1738" class="Bound">D</a> <a id="1759" href="/DenotCompositional/#1740" class="Bound">γ</a> <a id="1761" href="/DenotCompositional/#1743" class="Bound">v₁</a><a id="1763" class="Symbol">)</a> <a id="1765" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">×</a> <a id="1767" class="Symbol">(</a><a id="1768" href="/DenotCompositional/#1646" class="Function">ℱ</a> <a id="1770" href="/DenotCompositional/#1738" class="Bound">D</a> <a id="1772" href="/DenotCompositional/#1740" class="Bound">γ</a> <a id="1774" href="/DenotCompositional/#1748" class="Bound">v₂</a><a id="1776" class="Symbol">)</a></pre>

<p>Using this ℱ, we hope to prove that</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ℰ (ƛ M) ≃ ℱ (ℰ M)
</code></pre></div></div>

<p>The function ℱ is preserved when going from a larger value v to a
smaller value v’. The proof is a straightforward induction on the
derivation of v’ ⊑ v, using the up-env lemma in the case for the
(Fun⊑) rule.</p>

<pre class="Agda"><a id="sub-ℱ"></a><a id="2074" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2080" class="Symbol">:</a> <a id="2082" class="Symbol">∀{</a><a id="2084" href="/DenotCompositional/#2084" class="Bound">Γ</a><a id="2085" class="Symbol">}{</a><a id="2087" href="/DenotCompositional/#2087" class="Bound">M</a> <a id="2089" class="Symbol">:</a> <a id="2091" href="/DenotCompositional/#2084" class="Bound">Γ</a> <a id="2093" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="2095" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="2097" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="2099" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="2100" class="Symbol">}{</a><a id="2102" href="/DenotCompositional/#2102" class="Bound">γ</a> <a id="2104" href="/DenotCompositional/#2104" class="Bound">v</a> <a id="2106" href="/DenotCompositional/#2106" class="Bound">v&#39;</a><a id="2108" class="Symbol">}</a>
      <a id="2116" class="Symbol">→</a> <a id="2118" href="/DenotCompositional/#1646" class="Function">ℱ</a> <a id="2120" class="Symbol">(</a><a id="2121" href="/Denot/#18470" class="Function">ℰ</a> <a id="2123" href="/DenotCompositional/#2087" class="Bound">M</a><a id="2124" class="Symbol">)</a> <a id="2126" href="/DenotCompositional/#2102" class="Bound">γ</a> <a id="2128" href="/DenotCompositional/#2104" class="Bound">v</a>
      <a id="2136" class="Symbol">→</a> <a id="2138" href="/DenotCompositional/#2106" class="Bound">v&#39;</a> <a id="2141" href="/Denot/#4466" class="Datatype Operator">⊑</a> <a id="2143" href="/DenotCompositional/#2104" class="Bound">v</a>
        <a id="2153" class="Comment">------------</a>
      <a id="2172" class="Symbol">→</a> <a id="2174" href="/DenotCompositional/#1646" class="Function">ℱ</a> <a id="2176" class="Symbol">(</a><a id="2177" href="/Denot/#18470" class="Function">ℰ</a> <a id="2179" href="/DenotCompositional/#2087" class="Bound">M</a><a id="2180" class="Symbol">)</a> <a id="2182" href="/DenotCompositional/#2102" class="Bound">γ</a> <a id="2184" href="/DenotCompositional/#2106" class="Bound">v&#39;</a>
<a id="2187" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2193" href="/DenotCompositional/#2193" class="Bound">d</a> <a id="2195" href="/Denot/#4501" class="InductiveConstructor">Bot⊑</a> <a id="2200" class="Symbol">=</a> <a id="2202" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Unit.html#106" class="InductiveConstructor">tt</a>
<a id="2205" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2211" href="/DenotCompositional/#2211" class="Bound">d</a> <a id="2213" class="Symbol">(</a><a id="2214" href="/Denot/#4875" class="InductiveConstructor">Fun⊑</a> <a id="2219" href="/DenotCompositional/#2219" class="Bound">lt</a> <a id="2222" href="/DenotCompositional/#2222" class="Bound">lt&#39;</a><a id="2225" class="Symbol">)</a> <a id="2227" class="Symbol">=</a> <a id="2229" href="/Denot/#10632" class="InductiveConstructor">sub</a> <a id="2233" class="Symbol">(</a><a id="2234" href="/Denot/#26642" class="Function">up-env</a> <a id="2241" href="/DenotCompositional/#2211" class="Bound">d</a> <a id="2243" href="/DenotCompositional/#2219" class="Bound">lt</a><a id="2245" class="Symbol">)</a> <a id="2247" href="/DenotCompositional/#2222" class="Bound">lt&#39;</a>
<a id="2251" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2257" href="/DenotCompositional/#2257" class="Bound">d</a> <a id="2259" class="Symbol">(</a><a id="2260" href="/Denot/#4525" class="InductiveConstructor">ConjL⊑</a> <a id="2267" href="/DenotCompositional/#2267" class="Bound">lt</a> <a id="2270" href="/DenotCompositional/#2270" class="Bound">lt₁</a><a id="2273" class="Symbol">)</a> <a id="2275" class="Symbol">=</a> <a id="2277" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="2279" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2285" href="/DenotCompositional/#2257" class="Bound">d</a> <a id="2287" href="/DenotCompositional/#2267" class="Bound">lt</a> <a id="2290" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2292" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2298" href="/DenotCompositional/#2257" class="Bound">d</a> <a id="2300" href="/DenotCompositional/#2270" class="Bound">lt₁</a> <a id="2304" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="2306" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2312" href="/DenotCompositional/#2312" class="Bound">d</a> <a id="2314" class="Symbol">(</a><a id="2315" href="/Denot/#4627" class="InductiveConstructor">ConjR1⊑</a> <a id="2323" href="/DenotCompositional/#2323" class="Bound">lt</a><a id="2325" class="Symbol">)</a> <a id="2327" class="Symbol">=</a> <a id="2329" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2335" class="Symbol">(</a><a id="2336" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#155" class="Field">proj₁</a> <a id="2342" href="/DenotCompositional/#2312" class="Bound">d</a><a id="2343" class="Symbol">)</a> <a id="2345" href="/DenotCompositional/#2323" class="Bound">lt</a>
<a id="2348" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2354" href="/DenotCompositional/#2354" class="Bound">d</a> <a id="2356" class="Symbol">(</a><a id="2357" href="/Denot/#4708" class="InductiveConstructor">ConjR2⊑</a> <a id="2365" href="/DenotCompositional/#2365" class="Bound">lt</a><a id="2367" class="Symbol">)</a> <a id="2369" class="Symbol">=</a> <a id="2371" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2377" class="Symbol">(</a><a id="2378" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#167" class="Field">proj₂</a> <a id="2384" href="/DenotCompositional/#2354" class="Bound">d</a><a id="2385" class="Symbol">)</a> <a id="2387" href="/DenotCompositional/#2365" class="Bound">lt</a>
<a id="2390" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2396" class="Symbol">{</a><a id="2397" class="Argument">v</a> <a id="2399" class="Symbol">=</a> <a id="2401" href="/DenotCompositional/#2401" class="Bound">v₁</a> <a id="2404" href="/Denot/#4133" class="InductiveConstructor Operator">↦</a> <a id="2406" href="/DenotCompositional/#2406" class="Bound">v₂</a> <a id="2409" href="/Denot/#4163" class="InductiveConstructor Operator">⊔</a> <a id="2411" href="/DenotCompositional/#2401" class="Bound">v₁</a> <a id="2414" href="/Denot/#4133" class="InductiveConstructor Operator">↦</a> <a id="2416" href="/DenotCompositional/#2416" class="Bound">v₃</a><a id="2418" class="Symbol">}</a> <a id="2420" class="Symbol">{</a><a id="2421" href="/DenotCompositional/#2401" class="Bound">v₁</a> <a id="2424" href="/Denot/#4133" class="InductiveConstructor Operator">↦</a> <a id="2426" class="Symbol">(</a><a id="2427" href="/DenotCompositional/#2406" class="Bound">v₂</a> <a id="2430" href="/Denot/#4163" class="InductiveConstructor Operator">⊔</a> <a id="2432" href="/DenotCompositional/#2416" class="Bound">v₃</a><a id="2434" class="Symbol">)}</a> <a id="2437" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="2439" href="/DenotCompositional/#2439" class="Bound">M2</a> <a id="2442" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="2444" href="/DenotCompositional/#2444" class="Bound">M3</a> <a id="2447" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="2449" href="/Denot/#4997" class="InductiveConstructor">Dist⊑</a> <a id="2455" class="Symbol">=</a>
   <a id="2460" href="/Denot/#10488" class="InductiveConstructor">⊔-intro</a> <a id="2468" href="/DenotCompositional/#2439" class="Bound">M2</a> <a id="2471" href="/DenotCompositional/#2444" class="Bound">M3</a>
<a id="2474" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2480" href="/DenotCompositional/#2480" class="Bound">d</a> <a id="2482" class="Symbol">(</a><a id="2483" href="/Denot/#4789" class="InductiveConstructor">Trans⊑</a> <a id="2490" href="/DenotCompositional/#2490" class="Bound">x₁</a> <a id="2493" href="/DenotCompositional/#2493" class="Bound">x₂</a><a id="2495" class="Symbol">)</a> <a id="2497" class="Symbol">=</a> <a id="2499" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2505" class="Symbol">(</a><a id="2506" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="2512" href="/DenotCompositional/#2480" class="Bound">d</a> <a id="2514" href="/DenotCompositional/#2493" class="Bound">x₂</a><a id="2516" class="Symbol">)</a> <a id="2518" href="/DenotCompositional/#2490" class="Bound">x₁</a></pre>

<p>[PLW:
  If denotations were strengthened to be downward closed,
  we could rewrite the signature replacing (ℰ M) by d : Denotation (Γ , ★)]</p>

<p>With this subsumption property in hand, we can prove the forward
direction of the semantic equation for lambda.  The proof is by
induction on the semantics, using sub-ℱ in the case for the (sub)
rule.</p>

<pre class="Agda"><a id="ℰƛ→ℱℰ"></a><a id="2891" href="/DenotCompositional/#2891" class="Function">ℰƛ→ℱℰ</a> <a id="2897" class="Symbol">:</a> <a id="2899" class="Symbol">∀{</a><a id="2901" href="/DenotCompositional/#2901" class="Bound">Γ</a><a id="2902" class="Symbol">}{</a><a id="2904" href="/DenotCompositional/#2904" class="Bound">γ</a> <a id="2906" class="Symbol">:</a> <a id="2908" href="/Denot/#7488" class="Function">Env</a> <a id="2912" href="/DenotCompositional/#2901" class="Bound">Γ</a><a id="2913" class="Symbol">}{</a><a id="2915" href="/DenotCompositional/#2915" class="Bound">M</a> <a id="2917" class="Symbol">:</a> <a id="2919" href="/DenotCompositional/#2901" class="Bound">Γ</a> <a id="2921" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="2923" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="2925" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="2927" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="2928" class="Symbol">}{</a><a id="2930" href="/DenotCompositional/#2930" class="Bound">v</a> <a id="2932" class="Symbol">:</a> <a id="2934" href="/Denot/#4101" class="Datatype">Value</a><a id="2939" class="Symbol">}</a>
        <a id="2949" class="Symbol">→</a> <a id="2951" href="/Denot/#18470" class="Function">ℰ</a> <a id="2953" class="Symbol">(</a><a id="2954" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="2956" href="/DenotCompositional/#2915" class="Bound">M</a><a id="2957" class="Symbol">)</a> <a id="2959" href="/DenotCompositional/#2904" class="Bound">γ</a> <a id="2961" href="/DenotCompositional/#2930" class="Bound">v</a>
          <a id="2973" class="Comment">------------</a>
        <a id="2994" class="Symbol">→</a> <a id="2996" href="/DenotCompositional/#1646" class="Function">ℱ</a> <a id="2998" class="Symbol">(</a><a id="2999" href="/Denot/#18470" class="Function">ℰ</a> <a id="3001" href="/DenotCompositional/#2915" class="Bound">M</a><a id="3002" class="Symbol">)</a> <a id="3004" href="/DenotCompositional/#2904" class="Bound">γ</a> <a id="3006" href="/DenotCompositional/#2930" class="Bound">v</a>
<a id="3008" href="/DenotCompositional/#2891" class="Function">ℰƛ→ℱℰ</a> <a id="3014" class="Symbol">(</a><a id="3015" href="/Denot/#10281" class="InductiveConstructor">↦-intro</a> <a id="3023" href="/DenotCompositional/#3023" class="Bound">d</a><a id="3024" class="Symbol">)</a> <a id="3026" class="Symbol">=</a> <a id="3028" href="/DenotCompositional/#3023" class="Bound">d</a>
<a id="3030" href="/DenotCompositional/#2891" class="Function">ℰƛ→ℱℰ</a> <a id="3036" href="/Denot/#10413" class="InductiveConstructor">⊥-intro</a> <a id="3044" class="Symbol">=</a> <a id="3046" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Unit.html#106" class="InductiveConstructor">tt</a>
<a id="3049" href="/DenotCompositional/#2891" class="Function">ℰƛ→ℱℰ</a> <a id="3055" class="Symbol">(</a><a id="3056" href="/Denot/#10488" class="InductiveConstructor">⊔-intro</a> <a id="3064" href="/DenotCompositional/#3064" class="Bound">d₁</a> <a id="3067" href="/DenotCompositional/#3067" class="Bound">d₂</a><a id="3069" class="Symbol">)</a> <a id="3071" class="Symbol">=</a> <a id="3073" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="3075" href="/DenotCompositional/#2891" class="Function">ℰƛ→ℱℰ</a> <a id="3081" href="/DenotCompositional/#3064" class="Bound">d₁</a> <a id="3084" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="3086" href="/DenotCompositional/#2891" class="Function">ℰƛ→ℱℰ</a> <a id="3092" href="/DenotCompositional/#3067" class="Bound">d₂</a> <a id="3095" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="3097" href="/DenotCompositional/#2891" class="Function">ℰƛ→ℱℰ</a> <a id="3103" class="Symbol">(</a><a id="3104" href="/Denot/#10632" class="InductiveConstructor">sub</a> <a id="3108" href="/DenotCompositional/#3108" class="Bound">d</a> <a id="3110" href="/DenotCompositional/#3110" class="Bound">lt</a><a id="3112" class="Symbol">)</a> <a id="3114" class="Symbol">=</a> <a id="3116" href="/DenotCompositional/#2074" class="Function">sub-ℱ</a> <a id="3122" class="Symbol">(</a><a id="3123" href="/DenotCompositional/#2891" class="Function">ℰƛ→ℱℰ</a> <a id="3129" href="/DenotCompositional/#3108" class="Bound">d</a><a id="3130" class="Symbol">)</a> <a id="3132" href="/DenotCompositional/#3110" class="Bound">lt</a></pre>

<p>The “inversion lemma” for lambda abstraction is a special case of the
above. The inversion lemma is useful in proving that denotations are
preserved by reduction.</p>

<pre class="Agda"><a id="lambda-inversion"></a><a id="3324" href="/DenotCompositional/#3324" class="Function">lambda-inversion</a> <a id="3341" class="Symbol">:</a> <a id="3343" class="Symbol">∀{</a><a id="3345" href="/DenotCompositional/#3345" class="Bound">Γ</a><a id="3346" class="Symbol">}{</a><a id="3348" href="/DenotCompositional/#3348" class="Bound">γ</a> <a id="3350" class="Symbol">:</a> <a id="3352" href="/Denot/#7488" class="Function">Env</a> <a id="3356" href="/DenotCompositional/#3345" class="Bound">Γ</a><a id="3357" class="Symbol">}{</a><a id="3359" href="/DenotCompositional/#3359" class="Bound">M</a> <a id="3361" class="Symbol">:</a> <a id="3363" href="/DenotCompositional/#3345" class="Bound">Γ</a> <a id="3365" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="3367" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="3369" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="3371" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="3372" class="Symbol">}{</a><a id="3374" href="/DenotCompositional/#3374" class="Bound">v₁</a> <a id="3377" href="/DenotCompositional/#3377" class="Bound">v₂</a> <a id="3380" class="Symbol">:</a> <a id="3382" href="/Denot/#4101" class="Datatype">Value</a><a id="3387" class="Symbol">}</a>
  <a id="3391" class="Symbol">→</a> <a id="3393" href="/DenotCompositional/#3348" class="Bound">γ</a> <a id="3395" href="/Denot/#9991" class="Datatype Operator">⊢</a> <a id="3397" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="3399" href="/DenotCompositional/#3359" class="Bound">M</a> <a id="3401" href="/Denot/#9991" class="Datatype Operator">↓</a> <a id="3403" href="/DenotCompositional/#3374" class="Bound">v₁</a> <a id="3406" href="/Denot/#4133" class="InductiveConstructor Operator">↦</a> <a id="3408" href="/DenotCompositional/#3377" class="Bound">v₂</a>
    <a id="3415" class="Comment">-----------------</a>
  <a id="3435" class="Symbol">→</a> <a id="3437" class="Symbol">(</a><a id="3438" href="/DenotCompositional/#3348" class="Bound">γ</a> <a id="3440" href="/Denot/#7646" class="Function Operator">`,</a> <a id="3443" href="/DenotCompositional/#3374" class="Bound">v₁</a><a id="3445" class="Symbol">)</a> <a id="3447" href="/Denot/#9991" class="Datatype Operator">⊢</a> <a id="3449" href="/DenotCompositional/#3359" class="Bound">M</a> <a id="3451" href="/Denot/#9991" class="Datatype Operator">↓</a> <a id="3453" href="/DenotCompositional/#3377" class="Bound">v₂</a>
<a id="3456" href="/DenotCompositional/#3324" class="Function">lambda-inversion</a><a id="3472" class="Symbol">{</a><a id="3473" class="Argument">v₁</a> <a id="3476" class="Symbol">=</a> <a id="3478" href="/DenotCompositional/#3478" class="Bound">v₁</a><a id="3480" class="Symbol">}{</a><a id="3482" class="Argument">v₂</a> <a id="3485" class="Symbol">=</a> <a id="3487" href="/DenotCompositional/#3487" class="Bound">v₂</a><a id="3489" class="Symbol">}</a> <a id="3491" href="/DenotCompositional/#3491" class="Bound">d</a> <a id="3493" class="Symbol">=</a> <a id="3495" href="/DenotCompositional/#2891" class="Function">ℰƛ→ℱℰ</a><a id="3500" class="Symbol">{</a><a id="3501" class="Argument">v</a> <a id="3503" class="Symbol">=</a> <a id="3505" href="/DenotCompositional/#3478" class="Bound">v₁</a> <a id="3508" href="/Denot/#4133" class="InductiveConstructor Operator">↦</a> <a id="3510" href="/DenotCompositional/#3487" class="Bound">v₂</a><a id="3512" class="Symbol">}</a> <a id="3514" href="/DenotCompositional/#3491" class="Bound">d</a></pre>

<p>The backward direction of the semantic equation for lambda is even
easier to prove than the forward direction. We proceed by induction on
the value v.</p>

<pre class="Agda"><a id="ℱℰ→ℰƛ"></a><a id="3693" href="/DenotCompositional/#3693" class="Function">ℱℰ→ℰƛ</a> <a id="3699" class="Symbol">:</a> <a id="3701" class="Symbol">∀{</a><a id="3703" href="/DenotCompositional/#3703" class="Bound">Γ</a><a id="3704" class="Symbol">}{</a><a id="3706" href="/DenotCompositional/#3706" class="Bound">γ</a> <a id="3708" class="Symbol">:</a> <a id="3710" href="/Denot/#7488" class="Function">Env</a> <a id="3714" href="/DenotCompositional/#3703" class="Bound">Γ</a><a id="3715" class="Symbol">}{</a><a id="3717" href="/DenotCompositional/#3717" class="Bound">M</a> <a id="3719" class="Symbol">:</a> <a id="3721" href="/DenotCompositional/#3703" class="Bound">Γ</a> <a id="3723" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="3725" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="3727" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="3729" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="3730" class="Symbol">}{</a><a id="3732" href="/DenotCompositional/#3732" class="Bound">v</a> <a id="3734" class="Symbol">:</a> <a id="3736" href="/Denot/#4101" class="Datatype">Value</a><a id="3741" class="Symbol">}</a>
        <a id="3751" class="Symbol">→</a> <a id="3753" href="/DenotCompositional/#1646" class="Function">ℱ</a> <a id="3755" class="Symbol">(</a><a id="3756" href="/Denot/#18470" class="Function">ℰ</a> <a id="3758" href="/DenotCompositional/#3717" class="Bound">M</a><a id="3759" class="Symbol">)</a> <a id="3761" href="/DenotCompositional/#3706" class="Bound">γ</a> <a id="3763" href="/DenotCompositional/#3732" class="Bound">v</a>
          <a id="3775" class="Comment">------------</a>
        <a id="3796" class="Symbol">→</a> <a id="3798" href="/Denot/#18470" class="Function">ℰ</a> <a id="3800" class="Symbol">(</a><a id="3801" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="3803" href="/DenotCompositional/#3717" class="Bound">M</a><a id="3804" class="Symbol">)</a> <a id="3806" href="/DenotCompositional/#3706" class="Bound">γ</a> <a id="3808" href="/DenotCompositional/#3732" class="Bound">v</a>
<a id="3810" href="/DenotCompositional/#3693" class="Function">ℱℰ→ℰƛ</a> <a id="3816" class="Symbol">{</a><a id="3817" class="Argument">v</a> <a id="3819" class="Symbol">=</a> <a id="3821" href="/Denot/#4121" class="InductiveConstructor">⊥</a><a id="3822" class="Symbol">}</a> <a id="3824" href="/DenotCompositional/#3824" class="Bound">d</a> <a id="3826" class="Symbol">=</a> <a id="3828" href="/Denot/#10413" class="InductiveConstructor">⊥-intro</a>
<a id="3836" href="/DenotCompositional/#3693" class="Function">ℱℰ→ℰƛ</a> <a id="3842" class="Symbol">{</a><a id="3843" class="Argument">v</a> <a id="3845" class="Symbol">=</a> <a id="3847" href="/DenotCompositional/#3847" class="Bound">v₁</a> <a id="3850" href="/Denot/#4133" class="InductiveConstructor Operator">↦</a> <a id="3852" href="/DenotCompositional/#3852" class="Bound">v₂</a><a id="3854" class="Symbol">}</a> <a id="3856" href="/DenotCompositional/#3856" class="Bound">d</a> <a id="3858" class="Symbol">=</a> <a id="3860" href="/Denot/#10281" class="InductiveConstructor">↦-intro</a> <a id="3868" href="/DenotCompositional/#3856" class="Bound">d</a>
<a id="3870" href="/DenotCompositional/#3693" class="Function">ℱℰ→ℰƛ</a> <a id="3876" class="Symbol">{</a><a id="3877" class="Argument">v</a> <a id="3879" class="Symbol">=</a> <a id="3881" href="/DenotCompositional/#3881" class="Bound">v₁</a> <a id="3884" href="/Denot/#4163" class="InductiveConstructor Operator">⊔</a> <a id="3886" href="/DenotCompositional/#3886" class="Bound">v₂</a><a id="3888" class="Symbol">}</a> <a id="3890" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="3892" href="/DenotCompositional/#3892" class="Bound">d1</a> <a id="3895" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="3897" href="/DenotCompositional/#3897" class="Bound">d2</a> <a id="3900" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="3902" class="Symbol">=</a> <a id="3904" href="/Denot/#10488" class="InductiveConstructor">⊔-intro</a> <a id="3912" class="Symbol">(</a><a id="3913" href="/DenotCompositional/#3693" class="Function">ℱℰ→ℰƛ</a> <a id="3919" href="/DenotCompositional/#3892" class="Bound">d1</a><a id="3921" class="Symbol">)</a> <a id="3923" class="Symbol">(</a><a id="3924" href="/DenotCompositional/#3693" class="Function">ℱℰ→ℰƛ</a> <a id="3930" href="/DenotCompositional/#3897" class="Bound">d2</a><a id="3932" class="Symbol">)</a></pre>

<p>So indeed, the denotational semantics is composititional with respect
to lambda abstraction, as witnessed by the function ℱ.</p>

<pre class="Agda"><a id="lam-equiv"></a><a id="4085" href="/DenotCompositional/#4085" class="Function">lam-equiv</a> <a id="4095" class="Symbol">:</a> <a id="4097" class="Symbol">∀{</a><a id="4099" href="/DenotCompositional/#4099" class="Bound">Γ</a><a id="4100" class="Symbol">}{</a><a id="4102" href="/DenotCompositional/#4102" class="Bound">γ</a> <a id="4104" class="Symbol">:</a> <a id="4106" href="/Denot/#7488" class="Function">Env</a> <a id="4110" href="/DenotCompositional/#4099" class="Bound">Γ</a><a id="4111" class="Symbol">}{</a><a id="4113" href="/DenotCompositional/#4113" class="Bound">M</a> <a id="4115" class="Symbol">:</a> <a id="4117" href="/DenotCompositional/#4099" class="Bound">Γ</a> <a id="4119" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="4121" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="4123" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="4125" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="4126" class="Symbol">}</a>
          <a id="4138" class="Symbol">→</a> <a id="4140" href="/Denot/#18470" class="Function">ℰ</a> <a id="4142" class="Symbol">(</a><a id="4143" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="4145" href="/DenotCompositional/#4113" class="Bound">M</a><a id="4146" class="Symbol">)</a> <a id="4148" href="/Denot/#18668" class="Function Operator">≃</a> <a id="4150" href="/DenotCompositional/#1646" class="Function">ℱ</a> <a id="4152" class="Symbol">(</a><a id="4153" href="/Denot/#18470" class="Function">ℰ</a> <a id="4155" href="/DenotCompositional/#4113" class="Bound">M</a><a id="4156" class="Symbol">)</a>
<a id="4158" href="/DenotCompositional/#4085" class="Function">lam-equiv</a> <a id="4168" class="Symbol">=</a> <a id="4170" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4172" href="/DenotCompositional/#2891" class="Function">ℰƛ→ℱℰ</a> <a id="4178" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4180" href="/DenotCompositional/#3693" class="Function">ℱℰ→ℰƛ</a> <a id="4186" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

<p>Next we consider function application. For this we need to define a
function that takes two denotations, both in context Γ, and produces
another one in context Γ. This function, let us name it ●, needs to
mimic the non-recursive aspects of the semantics of an application (M · N).
We cannot proceed as easily as for ℱ and define the function by
recursion on value v because, for example, the rule (↦-elim) applies
to any value. Instead we shall define ● in a way that directly deals
with the (↦-elim) and (⊥-intro) rules but ignores (⊔-intro). This
makes the forward direction of the proof more difficult, and the case
for (⊔-intro) demonstrates why the (Dist⊑) rule is important.</p>

<p>So we define the application of D₁ to D₂, written D₁ ● D₂, to include
any value v’ equivalent to ⊥, for the (⊥-intro) rule, and to include any
value v’ that is the output of an entry v ↦ v’ in D₁, provided the
input v is in D₂, for the (↦-elim) rule.</p>

<pre class="Agda"><a id="5147" class="Keyword">infixl</a> <a id="5154" class="Number">7</a> <a id="5156" href="/DenotCompositional/#5161" class="Function Operator">_●_</a>

<a id="_●_"></a><a id="5161" href="/DenotCompositional/#5161" class="Function Operator">_●_</a> <a id="5165" class="Symbol">:</a> <a id="5167" class="Symbol">∀{</a><a id="5169" href="/DenotCompositional/#5169" class="Bound">Γ</a><a id="5170" class="Symbol">}</a> <a id="5172" class="Symbol">→</a> <a id="5174" href="/Denot/#18241" class="Function">Denotation</a> <a id="5185" href="/DenotCompositional/#5169" class="Bound">Γ</a> <a id="5187" class="Symbol">→</a> <a id="5189" href="/Denot/#18241" class="Function">Denotation</a> <a id="5200" href="/DenotCompositional/#5169" class="Bound">Γ</a> <a id="5202" class="Symbol">→</a> <a id="5204" href="/Denot/#18241" class="Function">Denotation</a> <a id="5215" href="/DenotCompositional/#5169" class="Bound">Γ</a>
<a id="5217" class="Symbol">(</a><a id="5218" href="/DenotCompositional/#5218" class="Bound">D₁</a> <a id="5221" href="/DenotCompositional/#5161" class="Function Operator">●</a> <a id="5223" href="/DenotCompositional/#5223" class="Bound">D₂</a><a id="5225" class="Symbol">)</a> <a id="5227" href="/DenotCompositional/#5227" class="Bound">γ</a> <a id="5229" href="/DenotCompositional/#5229" class="Bound">v&#39;</a> <a id="5232" class="Symbol">=</a> <a id="5234" href="/DenotCompositional/#5229" class="Bound">v&#39;</a> <a id="5237" href="/Denot/#4466" class="Datatype Operator">⊑</a> <a id="5239" href="/Denot/#4121" class="InductiveConstructor">⊥</a> <a id="5241" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#419" class="Datatype Operator">⊎</a> <a id="5243" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="5246" href="/DenotCompositional/#5246" class="Bound">v</a> <a id="5248" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="5250" href="/Denot/#4101" class="Datatype">Value</a> <a id="5256" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a><a id="5257" class="Symbol">(</a> <a id="5259" href="/DenotCompositional/#5218" class="Bound">D₁</a> <a id="5262" href="/DenotCompositional/#5227" class="Bound">γ</a> <a id="5264" class="Symbol">(</a><a id="5265" href="/DenotCompositional/#5246" class="Bound">v</a> <a id="5267" href="/Denot/#4133" class="InductiveConstructor Operator">↦</a> <a id="5269" href="/DenotCompositional/#5229" class="Bound">v&#39;</a><a id="5271" class="Symbol">)</a> <a id="5273" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">×</a> <a id="5275" href="/DenotCompositional/#5223" class="Bound">D₂</a> <a id="5278" href="/DenotCompositional/#5227" class="Bound">γ</a> <a id="5280" href="/DenotCompositional/#5246" class="Bound">v</a> <a id="5282" class="Symbol">)</a></pre>

<p>Next we consider the inversion lemma for application, which is also
the forward direction of the semantic equation for application.  We
describe the proof below.</p>

<pre class="Agda"><a id="ℰ·→●ℰ"></a><a id="5472" href="/DenotCompositional/#5472" class="Function">ℰ·→●ℰ</a> <a id="5478" class="Symbol">:</a> <a id="5480" class="Symbol">∀{</a><a id="5482" href="/DenotCompositional/#5482" class="Bound">Γ</a><a id="5483" class="Symbol">}{</a><a id="5485" href="/DenotCompositional/#5485" class="Bound">γ</a> <a id="5487" class="Symbol">:</a> <a id="5489" href="/Denot/#7488" class="Function">Env</a> <a id="5493" href="/DenotCompositional/#5482" class="Bound">Γ</a><a id="5494" class="Symbol">}{</a><a id="5496" href="/DenotCompositional/#5496" class="Bound">M</a> <a id="5498" href="/DenotCompositional/#5498" class="Bound">N</a> <a id="5500" class="Symbol">:</a> <a id="5502" href="/DenotCompositional/#5482" class="Bound">Γ</a> <a id="5504" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="5506" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="5507" class="Symbol">}{</a><a id="5509" href="/DenotCompositional/#5509" class="Bound">v</a> <a id="5511" class="Symbol">:</a> <a id="5513" href="/Denot/#4101" class="Datatype">Value</a><a id="5518" class="Symbol">}</a>
        <a id="5528" class="Symbol">→</a> <a id="5530" href="/Denot/#18470" class="Function">ℰ</a> <a id="5532" class="Symbol">(</a><a id="5533" href="/DenotCompositional/#5496" class="Bound">M</a> <a id="5535" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="5537" href="/DenotCompositional/#5498" class="Bound">N</a><a id="5538" class="Symbol">)</a> <a id="5540" href="/DenotCompositional/#5485" class="Bound">γ</a> <a id="5542" href="/DenotCompositional/#5509" class="Bound">v</a>
          <a id="5554" class="Comment">----------------</a>
        <a id="5579" class="Symbol">→</a> <a id="5581" class="Symbol">(</a><a id="5582" href="/Denot/#18470" class="Function">ℰ</a> <a id="5584" href="/DenotCompositional/#5496" class="Bound">M</a> <a id="5586" href="/DenotCompositional/#5161" class="Function Operator">●</a> <a id="5588" href="/Denot/#18470" class="Function">ℰ</a> <a id="5590" href="/DenotCompositional/#5498" class="Bound">N</a><a id="5591" class="Symbol">)</a> <a id="5593" href="/DenotCompositional/#5485" class="Bound">γ</a> <a id="5595" href="/DenotCompositional/#5509" class="Bound">v</a>
<a id="5597" href="/DenotCompositional/#5472" class="Function">ℰ·→●ℰ</a> <a id="5603" class="Symbol">(</a><a id="5604" href="/Denot/#10128" class="InductiveConstructor">↦-elim</a><a id="5610" class="Symbol">{</a><a id="5611" class="Argument">v₁</a> <a id="5614" class="Symbol">=</a> <a id="5616" href="/DenotCompositional/#5616" class="Bound">v₁</a><a id="5618" class="Symbol">}</a> <a id="5620" href="/DenotCompositional/#5620" class="Bound">d₁</a> <a id="5623" href="/DenotCompositional/#5623" class="Bound">d₂</a><a id="5625" class="Symbol">)</a> <a id="5627" class="Symbol">=</a> <a id="5629" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="5634" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5636" href="/DenotCompositional/#5616" class="Bound">v₁</a> <a id="5639" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5641" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5643" href="/DenotCompositional/#5620" class="Bound">d₁</a> <a id="5646" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5648" href="/DenotCompositional/#5623" class="Bound">d₂</a> <a id="5651" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="5653" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="5655" href="/DenotCompositional/#5472" class="Function">ℰ·→●ℰ</a> <a id="5661" class="Symbol">{</a><a id="5662" class="Argument">v</a> <a id="5664" class="Symbol">=</a> <a id="5666" href="/Denot/#4121" class="InductiveConstructor">⊥</a><a id="5667" class="Symbol">}</a> <a id="5669" class="Symbol">(</a><a id="5670" href="/Denot/#10413" class="InductiveConstructor">⊥-intro</a><a id="5677" class="Symbol">)</a> <a id="5679" class="Symbol">=</a> <a id="5681" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="5686" href="/Denot/#4501" class="InductiveConstructor">Bot⊑</a>
<a id="5691" href="/DenotCompositional/#5472" class="Function">ℰ·→●ℰ</a> <a id="5697" class="Symbol">{</a><a id="5698" href="/DenotCompositional/#5698" class="Bound">Γ</a><a id="5699" class="Symbol">}{</a><a id="5701" href="/DenotCompositional/#5701" class="Bound">γ</a><a id="5702" class="Symbol">}{</a><a id="5704" href="/DenotCompositional/#5704" class="Bound">M</a><a id="5705" class="Symbol">}{</a><a id="5707" href="/DenotCompositional/#5707" class="Bound">N</a><a id="5708" class="Symbol">}{</a><a id="5710" href="/DenotCompositional/#5710" class="Bound">v</a><a id="5711" class="Symbol">}</a> <a id="5713" class="Symbol">(</a><a id="5714" href="/Denot/#10488" class="InductiveConstructor">⊔-intro</a><a id="5721" class="Symbol">{</a><a id="5722" class="Argument">v₁</a> <a id="5725" class="Symbol">=</a> <a id="5727" href="/DenotCompositional/#5727" class="Bound">v₁</a><a id="5729" class="Symbol">}{</a><a id="5731" class="Argument">v₂</a> <a id="5734" class="Symbol">=</a> <a id="5736" href="/DenotCompositional/#5736" class="Bound">v₂</a><a id="5738" class="Symbol">}</a> <a id="5740" href="/DenotCompositional/#5740" class="Bound">d₁</a> <a id="5743" href="/DenotCompositional/#5743" class="Bound">d₂</a><a id="5745" class="Symbol">)</a> 
    <a id="5752" class="Keyword">with</a> <a id="5757" href="/DenotCompositional/#5472" class="Function">ℰ·→●ℰ</a> <a id="5763" href="/DenotCompositional/#5740" class="Bound">d₁</a> <a id="5766" class="Symbol">|</a> <a id="5768" href="/DenotCompositional/#5472" class="Function">ℰ·→●ℰ</a> <a id="5774" href="/DenotCompositional/#5743" class="Bound">d₂</a>
<a id="5777" class="Symbol">...</a> <a id="5781" class="Symbol">|</a> <a id="5783" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="5788" href="/DenotCompositional/#5788" class="Bound">lt1</a> <a id="5792" class="Symbol">|</a> <a id="5794" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="5799" href="/DenotCompositional/#5799" class="Bound">lt2</a> <a id="5803" class="Symbol">=</a> <a id="5805" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="5810" class="Symbol">(</a><a id="5811" href="/Denot/#4525" class="InductiveConstructor">ConjL⊑</a> <a id="5818" href="/DenotCompositional/#5788" class="Bound">lt1</a> <a id="5822" href="/DenotCompositional/#5799" class="Bound">lt2</a><a id="5825" class="Symbol">)</a>    
<a id="5831" class="Symbol">...</a> <a id="5835" class="Symbol">|</a> <a id="5837" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="5842" href="/DenotCompositional/#5842" class="Bound">lt1</a> <a id="5846" class="Symbol">|</a> <a id="5848" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="5853" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5855" href="/DenotCompositional/#5855" class="Bound">v₁&#39;</a> <a id="5859" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5861" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5863" href="/DenotCompositional/#5863" class="Bound">M↓v12</a> <a id="5869" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5871" href="/DenotCompositional/#5871" class="Bound">N↓v3</a> <a id="5876" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="5878" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="5880" class="Symbol">=</a>
      <a id="5888" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="5893" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5895" href="/DenotCompositional/#5855" class="Bound">v₁&#39;</a> <a id="5899" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5901" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5903" href="/Denot/#10632" class="InductiveConstructor">sub</a> <a id="5907" href="/DenotCompositional/#5863" class="Bound">M↓v12</a> <a id="5913" href="/DenotCompositional/#5939" class="Function">lt</a> <a id="5916" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5918" href="/DenotCompositional/#5871" class="Bound">N↓v3</a> <a id="5923" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="5925" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
      <a id="5933" class="Keyword">where</a> <a id="5939" href="/DenotCompositional/#5939" class="Function">lt</a> <a id="5942" class="Symbol">:</a> <a id="5944" href="/DenotCompositional/#5855" class="Bound">v₁&#39;</a> <a id="5948" href="/Denot/#4133" class="InductiveConstructor Operator">↦</a> <a id="5950" class="Symbol">(</a><a id="5951" class="Bound">v₁</a> <a id="5954" href="/Denot/#4163" class="InductiveConstructor Operator">⊔</a> <a id="5956" class="Bound">v₂</a><a id="5958" class="Symbol">)</a> <a id="5960" href="/Denot/#4466" class="Datatype Operator">⊑</a> <a id="5962" href="/DenotCompositional/#5855" class="Bound">v₁&#39;</a> <a id="5966" href="/Denot/#4133" class="InductiveConstructor Operator">↦</a> <a id="5968" class="Bound">v₂</a>
            <a id="5983" href="/DenotCompositional/#5939" class="Function">lt</a> <a id="5986" class="Symbol">=</a> <a id="5988" class="Symbol">(</a><a id="5989" href="/Denot/#4875" class="InductiveConstructor">Fun⊑</a> <a id="5994" href="/Denot/#5698" class="Function">Refl⊑</a> <a id="6000" class="Symbol">(</a><a id="6001" href="/Denot/#4525" class="InductiveConstructor">ConjL⊑</a> <a id="6008" class="Symbol">(</a><a id="6009" href="/Denot/#4789" class="InductiveConstructor">Trans⊑</a> <a id="6016" href="/DenotCompositional/#5842" class="Bound">lt1</a> <a id="6020" href="/Denot/#4501" class="InductiveConstructor">Bot⊑</a><a id="6024" class="Symbol">)</a> <a id="6026" href="/Denot/#5698" class="Function">Refl⊑</a><a id="6031" class="Symbol">))</a>
<a id="6034" class="Symbol">...</a> <a id="6038" class="Symbol">|</a> <a id="6040" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="6045" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6047" href="/DenotCompositional/#6047" class="Bound">v₁&#39;</a> <a id="6051" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6053" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6055" href="/DenotCompositional/#6055" class="Bound">M↓v12</a> <a id="6061" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6063" href="/DenotCompositional/#6063" class="Bound">N↓v3</a> <a id="6068" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6070" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6072" class="Symbol">|</a> <a id="6074" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="6079" href="/DenotCompositional/#6079" class="Bound">lt2</a> <a id="6083" class="Symbol">=</a>
      <a id="6091" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="6096" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6098" href="/DenotCompositional/#6047" class="Bound">v₁&#39;</a> <a id="6102" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6104" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6106" href="/Denot/#10632" class="InductiveConstructor">sub</a> <a id="6110" href="/DenotCompositional/#6055" class="Bound">M↓v12</a> <a id="6116" href="/DenotCompositional/#6142" class="Function">lt</a> <a id="6119" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6121" href="/DenotCompositional/#6063" class="Bound">N↓v3</a> <a id="6126" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6128" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
      <a id="6136" class="Keyword">where</a> <a id="6142" href="/DenotCompositional/#6142" class="Function">lt</a> <a id="6145" class="Symbol">:</a> <a id="6147" href="/DenotCompositional/#6047" class="Bound">v₁&#39;</a> <a id="6151" href="/Denot/#4133" class="InductiveConstructor Operator">↦</a> <a id="6153" class="Symbol">(</a><a id="6154" class="Bound">v₁</a> <a id="6157" href="/Denot/#4163" class="InductiveConstructor Operator">⊔</a> <a id="6159" class="Bound">v₂</a><a id="6161" class="Symbol">)</a> <a id="6163" href="/Denot/#4466" class="Datatype Operator">⊑</a> <a id="6165" href="/DenotCompositional/#6047" class="Bound">v₁&#39;</a> <a id="6169" href="/Denot/#4133" class="InductiveConstructor Operator">↦</a> <a id="6171" class="Bound">v₁</a>
            <a id="6186" href="/DenotCompositional/#6142" class="Function">lt</a> <a id="6189" class="Symbol">=</a> <a id="6191" class="Symbol">(</a><a id="6192" href="/Denot/#4875" class="InductiveConstructor">Fun⊑</a> <a id="6197" href="/Denot/#5698" class="Function">Refl⊑</a> <a id="6203" class="Symbol">(</a><a id="6204" href="/Denot/#4525" class="InductiveConstructor">ConjL⊑</a> <a id="6211" href="/Denot/#5698" class="Function">Refl⊑</a> <a id="6217" class="Symbol">(</a><a id="6218" href="/Denot/#4789" class="InductiveConstructor">Trans⊑</a> <a id="6225" href="/DenotCompositional/#6079" class="Bound">lt2</a> <a id="6229" href="/Denot/#4501" class="InductiveConstructor">Bot⊑</a><a id="6233" class="Symbol">)))</a>
<a id="6237" class="Symbol">...</a> <a id="6241" class="Symbol">|</a> <a id="6243" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="6248" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6250" href="/DenotCompositional/#6250" class="Bound">v₁&#39;</a> <a id="6254" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6256" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6258" href="/DenotCompositional/#6258" class="Bound">M↓v12</a> <a id="6264" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6266" href="/DenotCompositional/#6266" class="Bound">N↓v3</a> <a id="6271" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6273" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6275" class="Symbol">|</a> <a id="6277" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="6282" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6284" href="/DenotCompositional/#6284" class="Bound">v₁&#39;&#39;</a> <a id="6289" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6291" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6293" href="/DenotCompositional/#6293" class="Bound">M↓v12&#39;</a> <a id="6300" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6302" href="/DenotCompositional/#6302" class="Bound">N↓v3&#39;</a> <a id="6308" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6310" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6312" class="Symbol">=</a>
      <a id="6320" class="Keyword">let</a> <a id="6324" href="/DenotCompositional/#6324" class="Bound">M↓⊔</a> <a id="6328" class="Symbol">=</a> <a id="6330" href="/Denot/#10488" class="InductiveConstructor">⊔-intro</a> <a id="6338" href="/DenotCompositional/#6258" class="Bound">M↓v12</a> <a id="6344" href="/DenotCompositional/#6293" class="Bound">M↓v12&#39;</a> <a id="6351" class="Keyword">in</a>
      <a id="6360" class="Keyword">let</a> <a id="6364" href="/DenotCompositional/#6364" class="Bound">N↓⊔</a> <a id="6368" class="Symbol">=</a> <a id="6370" href="/Denot/#10488" class="InductiveConstructor">⊔-intro</a> <a id="6378" href="/DenotCompositional/#6266" class="Bound">N↓v3</a> <a id="6383" href="/DenotCompositional/#6302" class="Bound">N↓v3&#39;</a> <a id="6389" class="Keyword">in</a>
      <a id="6398" class="Keyword">let</a> <a id="6402" href="/DenotCompositional/#6402" class="Bound">x</a> <a id="6404" class="Symbol">=</a> <a id="6406" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="6411" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6413" href="/DenotCompositional/#6250" class="Bound">v₁&#39;</a> <a id="6417" href="/Denot/#4163" class="InductiveConstructor Operator">⊔</a> <a id="6419" href="/DenotCompositional/#6284" class="Bound">v₁&#39;&#39;</a> <a id="6424" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6426" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6428" href="/Denot/#10632" class="InductiveConstructor">sub</a> <a id="6432" href="/DenotCompositional/#6324" class="Bound">M↓⊔</a> <a id="6436" href="/Denot/#6359" class="Function">Dist⊔↦⊔</a> <a id="6444" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6446" href="/DenotCompositional/#6364" class="Bound">N↓⊔</a> <a id="6450" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6452" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6454" class="Keyword">in</a>
      <a id="6463" href="/DenotCompositional/#6402" class="Bound">x</a>
<a id="6465" href="/DenotCompositional/#5472" class="Function">ℰ·→●ℰ</a> <a id="6471" class="Symbol">{</a><a id="6472" href="/DenotCompositional/#6472" class="Bound">Γ</a><a id="6473" class="Symbol">}{</a><a id="6475" href="/DenotCompositional/#6475" class="Bound">γ</a><a id="6476" class="Symbol">}{</a><a id="6478" href="/DenotCompositional/#6478" class="Bound">M</a><a id="6479" class="Symbol">}{</a><a id="6481" href="/DenotCompositional/#6481" class="Bound">N</a><a id="6482" class="Symbol">}{</a><a id="6484" href="/DenotCompositional/#6484" class="Bound">v</a><a id="6485" class="Symbol">}</a> <a id="6487" class="Symbol">(</a><a id="6488" href="/Denot/#10632" class="InductiveConstructor">sub</a> <a id="6492" href="/DenotCompositional/#6492" class="Bound">d</a> <a id="6494" href="/DenotCompositional/#6494" class="Bound">lt</a><a id="6496" class="Symbol">)</a>
    <a id="6502" class="Keyword">with</a> <a id="6507" href="/DenotCompositional/#5472" class="Function">ℰ·→●ℰ</a> <a id="6513" href="/DenotCompositional/#6492" class="Bound">d</a>
<a id="6515" class="Symbol">...</a> <a id="6519" class="Symbol">|</a> <a id="6521" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="6526" href="/DenotCompositional/#6526" class="Bound">lt2</a> <a id="6530" class="Symbol">=</a> <a id="6532" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="6537" class="Symbol">(</a><a id="6538" href="/Denot/#4789" class="InductiveConstructor">Trans⊑</a> <a id="6545" class="Bound">lt</a> <a id="6548" href="/DenotCompositional/#6526" class="Bound">lt2</a><a id="6551" class="Symbol">)</a>
<a id="6553" class="Symbol">...</a> <a id="6557" class="Symbol">|</a> <a id="6559" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="6564" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6566" href="/DenotCompositional/#6566" class="Bound">v₁</a> <a id="6569" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6571" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6573" href="/DenotCompositional/#6573" class="Bound">M↓v12</a> <a id="6579" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6581" href="/DenotCompositional/#6581" class="Bound">N↓v3</a> <a id="6586" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6588" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6590" class="Symbol">=</a>
      <a id="6598" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="6603" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6605" href="/DenotCompositional/#6566" class="Bound">v₁</a> <a id="6608" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6610" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6612" href="/Denot/#10632" class="InductiveConstructor">sub</a> <a id="6616" href="/DenotCompositional/#6573" class="Bound">M↓v12</a> <a id="6622" class="Symbol">(</a><a id="6623" href="/Denot/#4875" class="InductiveConstructor">Fun⊑</a> <a id="6628" href="/Denot/#5698" class="Function">Refl⊑</a> <a id="6634" class="Bound">lt</a><a id="6636" class="Symbol">)</a> <a id="6638" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6640" href="/DenotCompositional/#6581" class="Bound">N↓v3</a> <a id="6645" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6647" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

<p>We proceed by induction on the semantics.</p>

<ul>
  <li>
    <p>In case (↦-elim) we have γ ⊢ M₁ ↓ (v₁ ↦ v₂) and γ ⊢ M₂ ↓ v₁,
which is all we need to show (ℰ M ● ℰ N) γ v₂.</p>
  </li>
  <li>
    <p>In case (⊥-intro) we have v = ⊥. We conclude that v ⊑ ⊥.</p>
  </li>
  <li>
    <p>In case (⊔-intro) we have ℰ (M · N) γ v₁ and ℰ (M · N) γ v₂
and need to show (ℰ M ● ℰ N) γ (v₁ ⊔ v₂). By the induction
hypothesis, we have (ℰ M ● ℰ N) γ v₁ and (ℰ M ● ℰ N) γ v₂.
We have four subcases to consider.</p>

    <ul>
      <li>Suppose v₁ ⊑ ⊥ and v₂ ⊑ ⊥. Then v₁ ⊔ v₂ ⊑ ⊥.</li>
      <li>Suppose v₁ ⊑ ⊥, γ ⊢ M ↓ v₁’ ↦ v₂, and γ ⊢ N ↓ v₁’.
We have γ ⊢ M ↓ v₁’ ↦ (v₁ ⊔ v₂) by rule (sub)
because v₁’ ↦ (v₁ ⊔ v₂) ⊑ v₁’ ↦ v₂.</li>
      <li>Suppose γ ⊢ M ↓ v₁’ ↦ v₁, γ ⊢ N ↓ v₁’, and v₂ ⊑ ⊥.
We have γ ⊢ M ↓ v₁’ ↦ (v₁ ⊔ v₂) by rule (sub)
because v₁’ ↦ (v₁ ⊔ v₂) ⊑ v₁’ ↦ v₁.</li>
      <li>
        <p>Suppose γ ⊢ M ↓ v₁’’ ↦ v₁, γ ⊢ N ↓ v₁’’,
γ ⊢ M ↓ v₁’ ↦ v₂, and γ ⊢ N ↓ v₁’.
This case is the most interesting.
By two uses of the rule (⊔-intro) we have
γ ⊢ M ↓ (v₁’ ↦ v₂) ⊔ (v₁’’ ↦ v₁) and
γ ⊢ N ↓ (v₁’ ⊔ v₁’’). But this does not yet match
what we need for (ℰ M ● ℰ N) because the result of
M must be an ↦ whose input entry is v₁’ ⊔ v₁’’.
So we use the (sub) rule to obtain 
γ ⊢ M ↓ (v₁’ ⊔ v₁’’) ↦ (v₁ ⊔ v₂),
using the Dist⊔→⊔ lemma (thanks to the Dist⊑ rule) to
show that</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  (v₁' ⊔ v₁'') ↦ (v₁ ⊔ v₂) ⊑ (v₁' ↦ v₂) ⊔ (v₁'' ↦ v₁)
</code></pre></div>        </div>

        <p>So we have proved what is needed for this case.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>In case (sub) we have Γ ⊢ M · N ↓ v₁ and v ⊑ v₁.
By the induction hypothesis, we have (ℰ M ● ℰ N) γ v₁.
We have two subcases to consider.</p>

    <ul>
      <li>Suppose v₁ ⊑ ⊥. We conclude that v ⊑ ⊥.</li>
      <li>Suppose Γ ⊢ M ↓ v’ → v₁ and Γ ⊢ N ↓ v’.
We conclude with Γ ⊢ M ↓ v’ → v by rule (sub), because
v’ → v ⊑ v’ → v₁.</li>
    </ul>
  </li>
</ul>

<p>The foward direction is proved by cases on the premise (ℰ M ● ℰ N) γ v.
In case v ⊑ ⊥, we obtain Γ ⊢ M · N ↓ ⊥ by rule (⊥-intro).
Otherwise, we conclude immediately by rule (↦-elim).</p>

<pre class="Agda"><a id="●ℰ→ℰ·"></a><a id="8646" href="/DenotCompositional/#8646" class="Function">●ℰ→ℰ·</a> <a id="8652" class="Symbol">:</a> <a id="8654" class="Symbol">∀{</a><a id="8656" href="/DenotCompositional/#8656" class="Bound">Γ</a><a id="8657" class="Symbol">}{</a><a id="8659" href="/DenotCompositional/#8659" class="Bound">γ</a> <a id="8661" class="Symbol">:</a> <a id="8663" href="/Denot/#7488" class="Function">Env</a> <a id="8667" href="/DenotCompositional/#8656" class="Bound">Γ</a><a id="8668" class="Symbol">}{</a><a id="8670" href="/DenotCompositional/#8670" class="Bound">M</a> <a id="8672" href="/DenotCompositional/#8672" class="Bound">N</a> <a id="8674" class="Symbol">:</a> <a id="8676" href="/DenotCompositional/#8656" class="Bound">Γ</a> <a id="8678" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="8680" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="8681" class="Symbol">}{</a><a id="8683" href="/DenotCompositional/#8683" class="Bound">v</a><a id="8684" class="Symbol">}</a>
      <a id="8692" class="Symbol">→</a> <a id="8694" class="Symbol">(</a><a id="8695" href="/Denot/#18470" class="Function">ℰ</a> <a id="8697" href="/DenotCompositional/#8670" class="Bound">M</a> <a id="8699" href="/DenotCompositional/#5161" class="Function Operator">●</a> <a id="8701" href="/Denot/#18470" class="Function">ℰ</a> <a id="8703" href="/DenotCompositional/#8672" class="Bound">N</a><a id="8704" class="Symbol">)</a> <a id="8706" href="/DenotCompositional/#8659" class="Bound">γ</a> <a id="8708" href="/DenotCompositional/#8683" class="Bound">v</a>
        <a id="8718" class="Comment">----------------</a>
      <a id="8741" class="Symbol">→</a> <a id="8743" href="/Denot/#18470" class="Function">ℰ</a> <a id="8745" class="Symbol">(</a><a id="8746" href="/DenotCompositional/#8670" class="Bound">M</a> <a id="8748" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="8750" href="/DenotCompositional/#8672" class="Bound">N</a><a id="8751" class="Symbol">)</a> <a id="8753" href="/DenotCompositional/#8659" class="Bound">γ</a> <a id="8755" href="/DenotCompositional/#8683" class="Bound">v</a>
<a id="8757" href="/DenotCompositional/#8646" class="Function">●ℰ→ℰ·</a> <a id="8763" class="Symbol">{</a><a id="8764" href="/DenotCompositional/#8764" class="Bound">γ</a><a id="8765" class="Symbol">}{</a><a id="8767" href="/DenotCompositional/#8767" class="Bound">v</a><a id="8768" class="Symbol">}</a> <a id="8770" class="Symbol">(</a><a id="8771" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="8776" href="/DenotCompositional/#8776" class="Bound">lt</a><a id="8778" class="Symbol">)</a> <a id="8780" class="Symbol">=</a> <a id="8782" href="/Denot/#10632" class="InductiveConstructor">sub</a> <a id="8786" href="/Denot/#10413" class="InductiveConstructor">⊥-intro</a> <a id="8794" href="/DenotCompositional/#8776" class="Bound">lt</a>
<a id="8797" href="/DenotCompositional/#8646" class="Function">●ℰ→ℰ·</a> <a id="8803" class="Symbol">{</a><a id="8804" href="/DenotCompositional/#8804" class="Bound">γ</a><a id="8805" class="Symbol">}{</a><a id="8807" href="/DenotCompositional/#8807" class="Bound">v</a><a id="8808" class="Symbol">}</a> <a id="8810" class="Symbol">(</a><a id="8811" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="8816" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="8818" href="/DenotCompositional/#8818" class="Bound">v₁</a> <a id="8821" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="8823" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="8825" href="/DenotCompositional/#8825" class="Bound">d1</a> <a id="8828" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="8830" href="/DenotCompositional/#8830" class="Bound">d2</a> <a id="8833" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="8835" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a><a id="8836" class="Symbol">)</a> <a id="8838" class="Symbol">=</a> <a id="8840" href="/Denot/#10128" class="InductiveConstructor">↦-elim</a> <a id="8847" href="/DenotCompositional/#8825" class="Bound">d1</a> <a id="8850" href="/DenotCompositional/#8830" class="Bound">d2</a></pre>

<p>So we have proved that the semantics is compositional with respect to
function application, as witnessed by the ● function.</p>

<pre class="Agda"><a id="app-equiv"></a><a id="9003" href="/DenotCompositional/#9003" class="Function">app-equiv</a> <a id="9013" class="Symbol">:</a> <a id="9015" class="Symbol">∀{</a><a id="9017" href="/DenotCompositional/#9017" class="Bound">Γ</a><a id="9018" class="Symbol">}{</a><a id="9020" href="/DenotCompositional/#9020" class="Bound">γ</a> <a id="9022" class="Symbol">:</a> <a id="9024" href="/Denot/#7488" class="Function">Env</a> <a id="9028" href="/DenotCompositional/#9017" class="Bound">Γ</a><a id="9029" class="Symbol">}{</a><a id="9031" href="/DenotCompositional/#9031" class="Bound">M</a> <a id="9033" href="/DenotCompositional/#9033" class="Bound">N</a> <a id="9035" class="Symbol">:</a> <a id="9037" href="/DenotCompositional/#9017" class="Bound">Γ</a> <a id="9039" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="9041" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="9042" class="Symbol">}</a>
          <a id="9054" class="Symbol">→</a> <a id="9056" href="/Denot/#18470" class="Function">ℰ</a> <a id="9058" class="Symbol">(</a><a id="9059" href="/DenotCompositional/#9031" class="Bound">M</a> <a id="9061" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="9063" href="/DenotCompositional/#9033" class="Bound">N</a><a id="9064" class="Symbol">)</a> <a id="9066" href="/Denot/#18668" class="Function Operator">≃</a> <a id="9068" class="Symbol">(</a><a id="9069" href="/Denot/#18470" class="Function">ℰ</a> <a id="9071" href="/DenotCompositional/#9031" class="Bound">M</a><a id="9072" class="Symbol">)</a> <a id="9074" href="/DenotCompositional/#5161" class="Function Operator">●</a> <a id="9076" class="Symbol">(</a><a id="9077" href="/Denot/#18470" class="Function">ℰ</a> <a id="9079" href="/DenotCompositional/#9033" class="Bound">N</a><a id="9080" class="Symbol">)</a>
<a id="9082" href="/DenotCompositional/#9003" class="Function">app-equiv</a> <a id="9092" class="Symbol">=</a> <a id="9094" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="9096" href="/DenotCompositional/#5472" class="Function">ℰ·→●ℰ</a> <a id="9102" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="9104" href="/DenotCompositional/#8646" class="Function">●ℰ→ℰ·</a> <a id="9110" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

<p>We also need an inversion lemma for variables.
If Γ ⊢ ` x ↓ v, then v ⊑ nth x γ. The proof is a straightforward
induction on the semantics.</p>

<pre class="Agda"><a id="var-inv"></a><a id="9278" href="/DenotCompositional/#9278" class="Function">var-inv</a> <a id="9286" class="Symbol">:</a> <a id="9288" class="Symbol">∀</a> <a id="9290" class="Symbol">{</a><a id="9291" href="/DenotCompositional/#9291" class="Bound">Γ</a> <a id="9293" href="/DenotCompositional/#9293" class="Bound">v</a> <a id="9295" href="/DenotCompositional/#9295" class="Bound">x</a><a id="9296" class="Symbol">}</a> <a id="9298" class="Symbol">{</a><a id="9299" href="/DenotCompositional/#9299" class="Bound">γ</a> <a id="9301" class="Symbol">:</a> <a id="9303" href="/Denot/#7488" class="Function">Env</a> <a id="9307" href="/DenotCompositional/#9291" class="Bound">Γ</a><a id="9308" class="Symbol">}</a>
  <a id="9312" class="Symbol">→</a> <a id="9314" href="/Denot/#18470" class="Function">ℰ</a> <a id="9316" class="Symbol">(</a><a id="9317" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="9319" href="/DenotCompositional/#9295" class="Bound">x</a><a id="9320" class="Symbol">)</a> <a id="9322" href="/DenotCompositional/#9299" class="Bound">γ</a> <a id="9324" href="/DenotCompositional/#9293" class="Bound">v</a>
    <a id="9330" class="Comment">-------------------</a>
  <a id="9352" class="Symbol">→</a> <a id="9354" href="/DenotCompositional/#9293" class="Bound">v</a> <a id="9356" href="/Denot/#4466" class="Datatype Operator">⊑</a> <a id="9358" href="/DenotCompositional/#9299" class="Bound">γ</a> <a id="9360" href="/DenotCompositional/#9295" class="Bound">x</a>
<a id="9362" href="/DenotCompositional/#9278" class="Function">var-inv</a> <a id="9370" class="Symbol">(</a><a id="9371" href="/Denot/#10045" class="InductiveConstructor">var</a><a id="9374" class="Symbol">)</a> <a id="9376" class="Symbol">=</a> <a id="9378" href="/Denot/#5698" class="Function">Refl⊑</a>
<a id="9384" href="/DenotCompositional/#9278" class="Function">var-inv</a> <a id="9392" class="Symbol">(</a><a id="9393" href="/Denot/#10488" class="InductiveConstructor">⊔-intro</a> <a id="9401" href="/DenotCompositional/#9401" class="Bound">d₁</a> <a id="9404" href="/DenotCompositional/#9404" class="Bound">d₂</a><a id="9406" class="Symbol">)</a> <a id="9408" class="Symbol">=</a> <a id="9410" href="/Denot/#4525" class="InductiveConstructor">ConjL⊑</a> <a id="9417" class="Symbol">(</a><a id="9418" href="/DenotCompositional/#9278" class="Function">var-inv</a> <a id="9426" href="/DenotCompositional/#9401" class="Bound">d₁</a><a id="9428" class="Symbol">)</a> <a id="9430" class="Symbol">(</a><a id="9431" href="/DenotCompositional/#9278" class="Function">var-inv</a> <a id="9439" href="/DenotCompositional/#9404" class="Bound">d₂</a><a id="9441" class="Symbol">)</a>
<a id="9443" href="/DenotCompositional/#9278" class="Function">var-inv</a> <a id="9451" class="Symbol">(</a><a id="9452" href="/Denot/#10632" class="InductiveConstructor">sub</a> <a id="9456" href="/DenotCompositional/#9456" class="Bound">d</a> <a id="9458" href="/DenotCompositional/#9458" class="Bound">lt</a><a id="9460" class="Symbol">)</a> <a id="9462" class="Symbol">=</a> <a id="9464" href="/Denot/#4789" class="InductiveConstructor">Trans⊑</a> <a id="9471" href="/DenotCompositional/#9458" class="Bound">lt</a> <a id="9474" class="Symbol">(</a><a id="9475" href="/DenotCompositional/#9278" class="Function">var-inv</a> <a id="9483" href="/DenotCompositional/#9456" class="Bound">d</a><a id="9484" class="Symbol">)</a>
<a id="9486" href="/DenotCompositional/#9278" class="Function">var-inv</a> <a id="9494" href="/Denot/#10413" class="InductiveConstructor">⊥-intro</a> <a id="9502" class="Symbol">=</a> <a id="9504" href="/Denot/#4501" class="InductiveConstructor">Bot⊑</a></pre>

<p>To round-out the semantic equations, we establish the following one
for variables.</p>

<pre class="Agda"><a id="var-equiv"></a><a id="9618" href="/DenotCompositional/#9618" class="Function">var-equiv</a> <a id="9628" class="Symbol">:</a> <a id="9630" class="Symbol">∀{</a><a id="9632" href="/DenotCompositional/#9632" class="Bound">Γ</a><a id="9633" class="Symbol">}{</a><a id="9635" href="/DenotCompositional/#9635" class="Bound">γ</a> <a id="9637" class="Symbol">:</a> <a id="9639" href="/Denot/#7488" class="Function">Env</a> <a id="9643" href="/DenotCompositional/#9632" class="Bound">Γ</a><a id="9644" class="Symbol">}{</a><a id="9646" href="/DenotCompositional/#9646" class="Bound">x</a> <a id="9648" class="Symbol">:</a> <a id="9650" href="/DenotCompositional/#9632" class="Bound">Γ</a> <a id="9652" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="9654" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="9655" class="Symbol">}</a>
          <a id="9667" class="Symbol">→</a> <a id="9669" href="/Denot/#18470" class="Function">ℰ</a> <a id="9671" class="Symbol">(</a><a id="9672" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="9674" href="/DenotCompositional/#9646" class="Bound">x</a><a id="9675" class="Symbol">)</a> <a id="9677" href="/Denot/#18668" class="Function Operator">≃</a> <a id="9679" class="Symbol">(λ</a> <a id="9682" href="/DenotCompositional/#9682" class="Bound">γ</a> <a id="9684" href="/DenotCompositional/#9684" class="Bound">v</a> <a id="9686" class="Symbol">→</a> <a id="9688" href="/DenotCompositional/#9684" class="Bound">v</a> <a id="9690" href="/Denot/#4466" class="Datatype Operator">⊑</a> <a id="9692" href="/Denot/#8337" class="Function">nth</a> <a id="9696" href="/DenotCompositional/#9646" class="Bound">x</a> <a id="9698" href="/DenotCompositional/#9682" class="Bound">γ</a><a id="9699" class="Symbol">)</a>
<a id="9701" href="/DenotCompositional/#9618" class="Function">var-equiv</a> <a id="9711" class="Symbol">=</a> <a id="9713" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="9715" href="/DenotCompositional/#9278" class="Function">var-inv</a> <a id="9723" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="9725" class="Symbol">(λ</a> <a id="9728" href="/DenotCompositional/#9728" class="Bound">lt</a> <a id="9731" class="Symbol">→</a> <a id="9733" href="/Denot/#10632" class="InductiveConstructor">sub</a> <a id="9737" href="/Denot/#10045" class="InductiveConstructor">var</a> <a id="9741" href="/DenotCompositional/#9728" class="Bound">lt</a><a id="9743" class="Symbol">)</a> <a id="9745" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

  </div>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/Denot/">Prev</a>
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/DenotCompositional.lagda">Source</a>
    
    
    &bullet;
    <a alt="Next chapter" href="/DenotSound/">Next</a>
    
</p>


</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Programming Language Foundations in Agda
</h2><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Philip Wadler</li>
          <li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wadler"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wadler</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wen Kokke</li>
          <li><a class="u-email" href="mailto:wen.kokke@ed.ac.uk">wen.kokke@ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wenkokke"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wenkokke</span></a></li><li><a href="https://www.twitter.com/wenkokke"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">wenkokke</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
  </div>
</footer>
<!-- Import jQuery -->
<script type="text/javascript" src="/assets/jquery.js"></script>

<!-- Script which allows for foldable code blocks -->
<script type="text/javascript">
 $('div.foldable pre').each(function(){
     var autoHeight = $(this).height();
     var lineHeight = parseFloat($(this).css('line-height'));

     var plus    = $("<div></div>");
     var horLine = $("<div></div>");
     var verLine = $("<div></div>");
     $(this).prepend(plus);
     plus.css({
         'position'         : 'relative',
         'float'            : 'right',
         'right'            : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'width'            : lineHeight,
         'height'           : lineHeight});
     verLine.css({
         'position'         : 'relative',
         'height'           : lineHeight,
         'width'            : '3px',
         'background-color' : '#C1E0FF'});
     horLine.css({
         'position'         : 'relative',
         'top'              : '-' + (0.5 * lineHeight + 1.5) + 'px',
         'left'             : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'height'           : '3px',
         'width'            : lineHeight,
         'background-color' : '#C1E0FF'});
     plus.append(verLine);
     plus.append(horLine);

     $(this).height(2.0 * lineHeight);
     $(this).css('overflow','hidden');

     $(this).click(function(){
         if ($(this).height() == autoHeight) {
             $(this).height(2.0 * lineHeight);
             plus.show();
         }
         else {
             $(this).height('auto');
             plus.hide();
         }
     });
 });
</script>

<!-- Import KaTeX -->
<script type="text/javascript" src="/assets/katex.js"></script>

<!-- Script which renders TeX using KaTeX -->
<script type="text/javascript">
 $("script[type='math/tex']").replaceWith(
     function(){
         var tex = $(this).text();
         return "<span class=\"inline-equation\">" +
                katex.renderToString(tex) +
                "</span>";
     });
 $("script[type='math/tex; mode=display']").replaceWith(
     function(){
         var tex = $(this).text().replace(/%.*?(\n|$)/g,"");
         return "<div class=\"equation\">" +
                katex.renderToString("\\displaystyle "+tex) +
                "</div>";
     });
</script>
</body>

</html>
